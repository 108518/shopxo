(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-product-promotion"],{"10b9":function(t,n,o){"use strict";o.r(n);var i=o("a8f2");for(var a in i)"default"!==a&&function(t){o.d(n,t,(function(){return i[t]}))}(a);var e,s,r,c,u=o("f0c5"),l=Object(u["a"])(i["default"],e,s,!1,null,null,null,!1,r,c);n["default"]=l.exports},3097:function(t,n,o){"use strict";o.r(n);var i=o("4f01"),a=o("a721");for(var e in a)"default"!==e&&function(t){o.d(n,t,(function(){return a[t]}))}(e);o("ac7c");var s,r=o("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"2847ef86",null,!1,i["a"],s);n["default"]=c.exports},"42ac":function(t,n,o){"use strict";var i=o("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;i(o("31b2"));var a={data:function(){return{initLoading:0,loading:0}},watch:{loading:function(t,n){t>0?uni.showLoading({mask:!0,title:"加载中"}):uni.hideLoading()},initLoading:function(t,n){}},created:function(){},methods:{}};n.default=a},"4f01":function(t,n,o){"use strict";o.d(n,"b",(function(){return a})),o.d(n,"c",(function(){return e})),o.d(n,"a",(function(){return i}));var i={youScroll:o("1b29").default},a=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("v-uni-view",{staticClass:"scroll-container"},[o("you-scroll",{ref:"scroll",on:{onPullDown:function(n){arguments[0]=n=t.$handleEvent(n),t.onPullDown.apply(void 0,arguments)},onScroll:function(n){arguments[0]=n=t.$handleEvent(n),t.onScroll.apply(void 0,arguments)},onLoadMore:function(n){arguments[0]=n=t.$handleEvent(n),t.onLoadMore.apply(void 0,arguments)}}},[o("v-uni-view",[o("v-uni-view",{staticClass:"promotion-list"},t._l(t.proList,(function(n,i){return o("v-uni-view",{key:i,staticClass:"promotion-cell",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.navToDetailPage(n)}}},[o("v-uni-view",{staticClass:"imgBox"},[o("v-uni-image",{staticClass:"loaded",attrs:{src:n.sku_img,mode:"aspectFill"}})],1),o("v-uni-view",{staticClass:"flex1 proInfo"},[o("v-uni-view",{staticClass:"prom-title"},[o("v-uni-text",{staticClass:"flex1 pro-name"},[t._v(t._s(n.product_name))]),o("v-uni-view",{staticClass:"pro-plus",on:{click:function(o){o.stopPropagation(),arguments[0]=o=t.$handleEvent(o),t.specToggle(n)}}},[o("v-uni-image",{attrs:{src:"/static/plus.png",mode:"aspectFill"}})],1)],1),o("v-uni-text",{staticClass:"prom-remark"},[t._v(t._s(n.option_value_title))]),o("v-uni-view",{staticClass:"prom-price"},[o("v-uni-text",{staticClass:"money"},[t._v(t._s(n.sale_price))]),o("v-uni-text",{staticClass:"proiframe"},[t._v("多买优惠")]),o("v-uni-text",{staticClass:"stars"},[o("v-uni-text",{staticClass:"iconfont icon-pingjiaxingxing active"}),t._v("好评度"+t._s(n.good_rate))],1)],1)],1)],1)})),1),o("div",{staticClass:"loadingText"},[t._v(t._s(t.isLoadAll?"没有更多数据了":"正在努力加载..."))])],1)],1),o("v-uni-navigator",{staticClass:"proBottom",attrs:{url:"/pages/cart/cart","open-type":"switchTab"}},[o("v-uni-view",{staticClass:"gouwuBox"},[o("v-uni-view",{staticClass:"gouwuche"},[o("v-uni-image",{attrs:{src:"/static/gwcicon.png",mode:"aspectFill"}})],1)],1)],1),o("popspec",{ref:"popspec",attrs:{proInfo:t.proInfo}})],1)},e=[]},"80c4":function(t,n,o){var i=o("24fb");n=i(!1),n.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/*远素间距*/\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-2847ef86]{background:#f3f3f3\n  /* padding-bottom: 160upx; */}body.?%PAGE?%[data-v-2847ef86]{background:#f3f3f3}',""]),t.exports=n},a721:function(t,n,o){"use strict";o.r(n);var i=o("bc81"),a=o.n(i);for(var e in i)"default"!==e&&function(t){o.d(n,t,(function(){return i[t]}))}(e);n["default"]=a.a},a8f2:function(t,n,o){"use strict";o.r(n);var i=o("42ac"),a=o.n(i);for(var e in i)"default"!==e&&function(t){o.d(n,t,(function(){return i[t]}))}(e);n["default"]=a.a},ac7c:function(t,n,o){"use strict";var i=o("b1c9"),a=o.n(i);a.a},b1c9:function(t,n,o){var i=o("80c4");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("4f06").default;a("04e45880",i,!0,{sourceMap:!1,shadowMode:!1})},bc81:function(t,n,o){"use strict";var i=o("4ea4");o("99af"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,o("96cf");var a=i(o("1da1")),e=i(o("5530")),s=i(o("d344")),r=(o("2493"),i(o("9fc0"))),c=i(o("1b29")),u=o("2f62"),l={components:{popspec:s.default,youScroll:c.default},computed:(0,e.default)({},(0,u.mapGetters)(["mallToken","platform","pager"])),data:function(){return{promotion_id:"",proList:[],proInfo:{},current:1,isLoadAll:!1,isLoading:!1}},onLoad:function(t){var n=this;return(0,a.default)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:t.promotion_id&&(n.promotion_id=t.promotion_id,n.loadData()),t.title&&uni.setNavigationBarTitle({title:decodeURIComponent("".concat(t.title))});case 2:case"end":return o.stop()}}),o)})))()},methods:{loadData:function(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];uni.showLoading({title:"加载中"}),(0,r.default)("/Promotion/GetProductList","POST",{promotion_id:this.promotion_id,limit:this.pager.perNum3,current:this.current},"").then((function(o){uni.hideLoading(),200==o.ret?(n?t.proList=o.data["list"]:null!=o.data["list"]&&(t.proList=t.proList.concat(o.data["list"])),o.data.count<=t.current*t.pager.perNum3&&(t.isLoadAll=!0),t.isLoading=!1):uni.showToast({title:o.msg,icon:"none",duration:2e3})})).catch((function(t){uni.hideLoading(),console.log(t)}))},specToggle:function(t){var n=this;this.proInfo=t,setTimeout((function(){n.$refs.popspec["specClass"]="show"}),100)},onPullDown:function(t){var n=this;setTimeout((function(){n.current=1,n.isLoadAll=!1,n.loadData(),t()}),1e3)},navToDetailPage:function(t){uni.navigateTo({url:"/pages/goods-detail/goods-detail?goods_id=".concat(t.product_id)})},onScroll:function(t){},onLoadMore:function(t){var n=this;this.isLoadAll||this.isLoading||(this.isLoading=!0,setTimeout((function(){n.current=n.current+1,n.loadData(!1)}),200))}}};n.default=l}}]);